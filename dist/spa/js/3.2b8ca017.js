(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"816f":function(t,e,n){},"82b6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"flex flex-center"},[n("div",{staticClass:"q-pa-md"},[n("div",{staticClass:"row justify-center"},[n("div",{staticClass:"col-12 col-md-12"},[n("p",[t._v("Use a camera para ler o QR code:")]),t._v("\n        "+t._s(t.message)+"\n        "),n("video",{attrs:{id:"camera"}})])]),n("div",{staticClass:"row justify-center"},[t.cliente.nome?n("div",{staticClass:"col-12 col-md-12"},[n("q-card",{staticClass:"my-card"},[n("q-card-section",[n("div",{staticClass:"q-pa-md"},[n("q-item-label",{attrs:{caption:""}},[t._v("Nome")]),n("span",{staticClass:"text-h5"},[t._v(t._s(t.cliente.nome))]),n("q-item-label",{attrs:{caption:""}},[t._v("Telefone : "+t._s(t.cliente.telefone))])],1),n("q-separator"),n("h3",{staticClass:"text-center"},[t._v("Pontos")]),n("h2",{staticClass:"text-center"},[t._v(t._s(t.cliente.pontos))]),n("q-card-section",{staticClass:"row column justify-center"},[n("q-btn",{attrs:{color:"secondary",label:"1 ponto"},on:{click:function(e){t.addpontos=1}}}),n("q-item-label",{staticClass:"text-center q-pa-sm",attrs:{caption:""}},[t._v("ou")]),n("q-input",{attrs:{outlined:"",type:"number",label:"Quantidade de pontos"},model:{value:t.addpontos,callback:function(e){t.addpontos=e},expression:"addpontos"}})],1),n("q-card-section",{staticClass:"row justify-center"},[n("q-btn",{attrs:{color:"primary",size:"lg",label:"Fidelizar"},on:{click:t.confirm}})],1)],1)],1)],1):t._e()])])])},o=[],s=n("967e"),c=n.n(s),i=(n("96cf"),n("fa84")),r=n.n(i),l=n("edec"),d=(n("436b"),{name:"PageIndex",data:function(){return{scanner:null,activeCameraId:null,cameras:[],scans:[],message:"",id:"",addpontos:"0",expend:!1,cliente:{nome:"",pontos:""}}},mounted:function(){this.initCamera()},methods:{getClient:l["a"],postPontos:l["c"],initCamera:function(){var t=this;t.scanner=new Instascan.Scanner({video:document.getElementById("camera"),scanPeriod:5}),t.scanner.addListener("scan",(function(e,n){console.log(e),t.id=e,t.showClient(e)})),Instascan.Camera.getCameras().then((function(e){t.cameras=e,e.length>0?(t.activeCameraId=e[0].id,t.scanner.start(e[0])):(t.message="camera não encontrada",alert("camera não encontrada"),console.error("No cameras found."))})).catch((function(t){alert(t),console.error(t)}))},showClient:function(t){var e=this;return r()(c.a.mark((function n(){var a;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getClient(t);case 3:a=n.sent,console.log(a),e.cliente=a.data[0],n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},confirm:function(){var t=this,e=parseInt(this.cliente.pontos)+parseInt(this.addpontos);this.$q.dialog({title:"Confirmar pontuação",message:"Você está adicionando "+this.addpontos+" No total o cliente "+this.cliente.nome+" ficara com : "+e,cancel:!0,persistent:!0}).onOk((function(){console.log("add"),t.adicionarPontos(t.cliente.id,e)})).onCancel((function(){}))},adicionarPontos:function(t,e){var n=this;return r()(c.a.mark((function a(){var o;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n.postPontos(t,e);case 3:o=a.sent,n.showClient(t),console.log(o),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}}),u=d,p=(n("d878"),n("2877")),f=n("eebe"),m=n.n(f),v=n("9989"),h=n("f09f"),C=n("a370"),g=n("0170"),b=n("eb85"),w=n("9c40"),x=n("27f9"),q=Object(p["a"])(u,a,o,!1,null,"241f424e",null);e["default"]=q.exports;m()(q,"components",{QPage:v["a"],QCard:h["a"],QCardSection:C["a"],QItemLabel:g["a"],QSeparator:b["a"],QBtn:w["a"],QInput:x["a"]})},d878:function(t,e,n){"use strict";var a=n("816f"),o=n.n(a);o.a},edec:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return c}));var a="http://localhost:8081/";function o(t){return console.log(t),this.$axios.post(a+"clientes",t)}function s(t){return console.log(t),this.$axios.get(a+"clientes/"+t)}function c(t,e){return console.log(e),this.$axios.post(a+"clientes/add/"+t,{pontos:e})}}}]);